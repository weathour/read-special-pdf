
<!-- templates/cleanup.html -->
{% extends "base.html" %}

{% block title %}清理管理{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-trash"></i> 清理管理</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h6><i class="fas fa-database"></i> 清理数据库记录</h6>
                                <p class="text-muted">清理指定天数前的失败处理记录</p>
                                <form action="{{ url_for('cleanup_old') }}" method="post" class="d-inline">
                                    <div class="input-group">
                                        <input type="number" class="form-control" name="days" value="30" min="1">
                                        <span class="input-group-text">天</span>
                                        <button type="submit" class="btn btn-warning">清理</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h6><i class="fas fa-upload"></i> 清理上传文件</h6>
                                <p class="text-muted">清空所有上传的PDF文件</p>
                                <form action="{{ url_for('clear_uploads') }}" method="post" class="d-inline">
                                    <button type="submit" class="btn btn-danger" onclick="return confirm('确定要清空所有上传文件吗？')">
                                        <i class="fas fa-trash"></i> 清空上传
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h6><i class="fas fa-download"></i> 清理输出文件</h6>
                                <p class="text-muted">清空所有处理结果文件</p>
                                <form action="{{ url_for('clear_outputs') }}" method="post" class="d-inline">
                                    <button type="submit" class="btn btn-danger" onclick="return confirm('确定要清空所有输出文件吗？')">
                                        <i class="fas fa-trash"></i> 清空输出
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h6><i class="fas fa-info-circle"></i> 注意事项</h6>
                                <ul class="text-muted">
                                    <li>清理操作不可恢复</li>
                                    <li>建议定期清理以节省空间</li>
                                    <li>重要文件请提前备份</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-folder"></i> 文件夹信息</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>上传文件夹:</strong>
                    <br>
                    <code>uploads/</code>
                </div>
                <div class="mb-3">
                    <strong>输出文件夹:</strong>
                    <br>
                    <code>web_outputs/</code>
                </div>
                <div class="mb-3">
                    <strong>数据库文件:</strong>
                    <br>
                    <code>processed_files.db</code>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
